systemd:
  units:
    - name: otel-collector.service
      enabled: true
      contents: |
        [Unit]
        Description=OpenTelemetry Collector
        After=network.target

        [Service]
        Type=simple
        ExecStart=docker run -v /etc/otel-collector/otel-collector.yaml:/otel-collector.yaml -v /var/run/docker.sock:/var/run/docker.sock --net=host --name=otel-collector --env GOOGLE_APPLICATION_CREDENTIALS=$GOOGLE_APPLICATION_CREDENTIALS --rm otel/opentelemetry-collector-contrib:latest --config=/otel-collector.yaml
        Restart=always
        RestartSec=5s

        [Install]
        WantedBy=multi-user.target